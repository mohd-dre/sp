{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nexports.__esModule = true;\nexports[\"default\"] = exports.INITIAL_CSS_LOAD_ERROR = exports.looseToArray = void 0;\nvar _mitt = _interopRequireDefault(require(\"../next-server/lib/mitt\"));\nvar _router = require(\"../next-server/lib/router/router\");\nvar _getAssetPathFromRoute = _interopRequireDefault(require(\"../next-server/lib/router/utils/get-asset-path-from-route\"));\nvar _isDynamic = require(\"../next-server/lib/router/utils/is-dynamic\");\nvar _parseRelativeUrl = require(\"../next-server/lib/router/utils/parse-relative-url\");\nvar looseToArray = function looseToArray(input) {\n  return [].slice.call(input);\n};\nexports.looseToArray = looseToArray;\nfunction hasRel(rel, link) {\n  try {\n    link = document.createElement('link');\n    return link.relList.supports(rel);\n  } catch (_unused) {}\n}\nfunction pageLoadError(route) {\n  return (0, _router.markLoadingError)(new Error(\"Error loading \".concat(route)));\n}\nvar INITIAL_CSS_LOAD_ERROR = Symbol('INITIAL_CSS_LOAD_ERROR');\nexports.INITIAL_CSS_LOAD_ERROR = INITIAL_CSS_LOAD_ERROR;\nvar relPrefetch = hasRel('preload') && !hasRel('prefetch') ?\n// https://caniuse.com/#feat=link-rel-preload\n// macOS and iOS (Safari does not support prefetch)\n'preload' :\n// https://caniuse.com/#feat=link-rel-prefetch\n// IE 11, Edge 12+, nearly all evergreen\n'prefetch';\nvar relPreload = hasRel('preload') ? 'preload' : relPrefetch;\nvar relPreloadStyle = 'fetch';\nvar hasNoModule = ('noModule' in document.createElement('script'));\nfunction normalizeRoute(route) {\n  if (route[0] !== '/') {\n    throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\".concat(route, \"\\\"\"));\n  }\n  if (route === '/') return route;\n  return route.replace(/\\/$/, '');\n}\nfunction appendLink(href, rel, as, link) {\n  return new Promise(function (res, rej) {\n    link = document.createElement('link'); // The order of property assignment here is intentional:\n    if (as) link.as = as;\n    link.rel = rel;\n    link.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n    link.onload = res;\n    link.onerror = rej; // `href` should always be last:\n    link.href = href;\n    document.head.appendChild(link);\n  });\n}\nfunction loadScript(url) {\n  return new Promise(function (res, rej) {\n    var script = document.createElement('script');\n    if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n      script.type = 'module';\n    }\n    script.crossOrigin = process.env.__NEXT_CROSS_ORIGIN;\n    script.src = url;\n    script.onload = res;\n    script.onerror = function () {\n      return rej(pageLoadError(url));\n    };\n    document.body.appendChild(script);\n  });\n}\nvar PageLoader = /*#__PURE__*/function () {\n  function PageLoader(buildId, assetPrefix, initialPage) {\n    _classCallCheck(this, PageLoader);\n    this.initialPage = void 0;\n    this.buildId = void 0;\n    this.assetPrefix = void 0;\n    this.pageCache = void 0;\n    this.pageRegisterEvents = void 0;\n    this.loadingRoutes = void 0;\n    this.promisedBuildManifest = void 0;\n    this.promisedSsgManifest = void 0;\n    this.promisedDevPagesManifest = void 0;\n    this.initialPage = initialPage;\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.pageRegisterEvents = (0, _mitt[\"default\"])();\n    this.loadingRoutes = {\n      // By default these 2 pages are being loaded in the initial html\n      '/_app': true\n    }; // TODO: get rid of this limitation for rendering the error page\n    if (initialPage !== '/_error') {\n      this.loadingRoutes[initialPage] = true;\n    }\n    this.promisedBuildManifest = new Promise(function (resolve) {\n      if (window.__BUILD_MANIFEST) {\n        resolve(window.__BUILD_MANIFEST);\n      } else {\n        ;\n        window.__BUILD_MANIFEST_CB = function () {\n          resolve(window.__BUILD_MANIFEST);\n        };\n      }\n    }); /** @type {Promise<Set<string>>} */\n    this.promisedSsgManifest = new Promise(function (resolve) {\n      if (window.__SSG_MANIFEST) {\n        resolve(window.__SSG_MANIFEST);\n      } else {\n        ;\n        window.__SSG_MANIFEST_CB = function () {\n          resolve(window.__SSG_MANIFEST);\n        };\n      }\n    });\n  }\n  _createClass(PageLoader, [{\n    key: \"getPageList\",\n    value: function getPageList() {\n      if (false) {\n        return this.promisedBuildManifest.then(function (buildManifest) {\n          return buildManifest.sortedPages;\n        });\n      } else {\n        if (window.__DEV_PAGES_MANIFEST) {\n          return window.__DEV_PAGES_MANIFEST.pages;\n        } else {\n          if (!this.promisedDevPagesManifest) {\n            this.promisedDevPagesManifest = fetch(\"\".concat(this.assetPrefix, \"/_next/static/development/_devPagesManifest.json\")).then(function (res) {\n              return res.json();\n            }).then(function (manifest) {\n              ;\n              window.__DEV_PAGES_MANIFEST = manifest;\n              return manifest.pages;\n            })[\"catch\"](function (err) {\n              console.log(\"Failed to fetch devPagesManifest\", err);\n            });\n          }\n          return this.promisedDevPagesManifest;\n        }\n      }\n    } // Returns a promise for the dependencies for a particular route\n  }, {\n    key: \"getDependencies\",\n    value: function getDependencies(route) {\n      var _this2 = this;\n      return this.promisedBuildManifest.then(function (m) {\n        return m[route] ? m[route].map(function (url) {\n          return \"\".concat(_this2.assetPrefix, \"/_next/\").concat(encodeURI(url));\n        }) : Promise.reject(pageLoadError(route));\n      });\n    } /**\n      * @param {string} href the route href (file-system path)\n      * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n      */\n  }, {\n    key: \"getDataHref\",\n    value: function getDataHref(href, asPath, ssg, locale) {\n      var _this3 = this;\n      var _ref = (0, _parseRelativeUrl.parseRelativeUrl)(href),\n        hrefPathname = _ref.pathname,\n        query = _ref.query,\n        search = _ref.search;\n      var _ref2 = (0, _parseRelativeUrl.parseRelativeUrl)(asPath),\n        asPathname = _ref2.pathname;\n      var route = normalizeRoute(hrefPathname);\n      var getHrefForSlug = function getHrefForSlug(path) {\n        var dataRoute = (0, _router.addLocale)((0, _getAssetPathFromRoute[\"default\"])(path, '.json'), locale);\n        return (0, _router.addBasePath)(\"/_next/data/\".concat(_this3.buildId).concat(dataRoute).concat(ssg ? '' : search));\n      };\n      var isDynamic = (0, _isDynamic.isDynamicRoute)(route);\n      var interpolatedRoute = isDynamic ? (0, _router.interpolateAs)(hrefPathname, asPathname, query).result : '';\n      return isDynamic ? interpolatedRoute && getHrefForSlug(interpolatedRoute) : getHrefForSlug(route);\n    } /**\n      * @param {string} href the route href (file-system path)\n      * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n      */\n  }, {\n    key: \"prefetchData\",\n    value: function prefetchData(href, asPath, locale) {\n      var _this4 = this;\n      var _ref3 = (0, _parseRelativeUrl.parseRelativeUrl)(href),\n        hrefPathname = _ref3.pathname;\n      var route = normalizeRoute(hrefPathname);\n      return this.promisedSsgManifest.then(function (s, _dataHref) {\n        return (\n          // Check if the route requires a data file\n          s.has(route) && (\n          // Try to generate data href, noop when falsy\n          _dataHref = _this4.getDataHref(href, asPath, true, locale)) &&\n          // noop when data has already been prefetched (dedupe)\n          !document.querySelector(\"link[rel=\\\"\".concat(relPrefetch, \"\\\"][href^=\\\"\").concat(_dataHref, \"\\\"]\")) &&\n          // Inject the `<link rel=prefetch>` tag for above computed `href`.\n          appendLink(_dataHref, relPrefetch, 'fetch')[\"catch\"](function () {/* ignore prefetch error */})\n        );\n      });\n    }\n  }, {\n    key: \"loadPage\",\n    value: function loadPage(route) {\n      var _this5 = this;\n      route = normalizeRoute(route);\n      return new Promise(function (resolve, reject) {\n        // If there's a cached version of the page, let's use it.\n        var cachedPage = _this5.pageCache[route];\n        if (cachedPage) {\n          if ('error' in cachedPage) {\n            reject(cachedPage.error);\n          } else {\n            resolve(cachedPage);\n          }\n          return;\n        }\n        var fire = function fire(pageToCache) {\n          _this5.pageRegisterEvents.off(route, fire);\n          delete _this5.loadingRoutes[route];\n          if ('error' in pageToCache) {\n            reject(pageToCache.error);\n          } else {\n            resolve(pageToCache);\n          }\n        }; // Register a listener to get the page\n        _this5.pageRegisterEvents.on(route, fire);\n        if (!_this5.loadingRoutes[route]) {\n          _this5.loadingRoutes[route] = true;\n          if (false) {\n            _this5.getDependencies(route).then(function (deps) {\n              var pending = [];\n              deps.forEach(function (d) {\n                if (d.endsWith('.js') && !document.querySelector(\"script[src^=\\\"\".concat(d, \"\\\"]\"))) {\n                  pending.push(loadScript(d));\n                } // Prefetch CSS as it'll be needed when the page JavaScript\n                // evaluates. This will only trigger if explicit prefetching is\n                // disabled for a <Link>... prefetching in this case is desirable\n                // because we *know* it's going to be used very soon (page was\n                // loaded).\n                if (d.endsWith('.css') && !document.querySelector(\"link[rel=\\\"\".concat(relPreload, \"\\\"][href^=\\\"\").concat(d, \"\\\"]\"))) {\n                  // This is not pushed into `pending` because we don't need to\n                  // wait for these to resolve. To prevent an unhandled\n                  // rejection, we swallow the error which is handled later in\n                  // the rendering cycle (this is just a preload optimization).\n                  appendLink(d, relPreload, relPreloadStyle)[\"catch\"](function () {/* ignore preload error */});\n                }\n              });\n              return Promise.all(pending);\n            })[\"catch\"](function (err) {\n              // Mark the page as failed to load if any of its required scripts\n              // fail to load:\n              _this5.pageCache[route] = {\n                error: err\n              };\n              fire({\n                error: err\n              });\n            });\n          } else {\n            // Development only. In production the page file is part of the build manifest\n            route = normalizeRoute(route);\n            var scriptRoute = (0, _getAssetPathFromRoute[\"default\"])(route, '.js');\n            var url = \"\".concat(_this5.assetPrefix, \"/_next/static/chunks/pages\").concat(encodeURI(scriptRoute));\n            loadScript(url)[\"catch\"](function (err) {\n              // Mark the page as failed to load if its script fails to load:\n              _this5.pageCache[route] = {\n                error: err\n              };\n              fire({\n                error: err\n              });\n            });\n          }\n        }\n      });\n    } // This method if called by the route code.\n  }, {\n    key: \"registerPage\",\n    value: function registerPage(route, regFn) {\n      var _this6 = this;\n      var _this = this;\n      var register = /*#__PURE__*/function () {\n        var _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(styleSheets) {\n          var mod, pageData;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return regFn();\n              case 3:\n                mod = _context.sent;\n                pageData = {\n                  page: mod[\"default\"] || mod,\n                  mod: mod,\n                  styleSheets: styleSheets\n                };\n                _this.pageCache[route] = pageData;\n                _this.pageRegisterEvents.emit(route, pageData);\n                _context.next = 13;\n                break;\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                _this.pageCache[route] = {\n                  error: _context.t0\n                };\n                _this.pageRegisterEvents.emit(route, {\n                  error: _context.t0\n                });\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[0, 9]]);\n        }));\n        function register(_x) {\n          return _register.apply(this, arguments);\n        }\n        return register;\n      }();\n      if (true) {\n        // Wait for webpack to become idle if it's not.\n        // More info: https://github.com/vercel/next.js/pull/1511\n        if (module.hot && module.hot.status() !== 'idle') {\n          console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\".concat(route, \"\\\"\"));\n          var check = function check(status) {\n            if (status === 'idle') {\n              ;\n              module.hot.removeStatusHandler(check);\n              register( /* css is handled via style-loader in development */[]);\n            }\n          };\n          module.hot.status(check);\n          return;\n        }\n      }\n      function fetchStyleSheet(href) {\n        return fetch(href).then(function (res) {\n          if (!res.ok) throw pageLoadError(href);\n          return res.text().then(function (text) {\n            return {\n              href: href,\n              text: text\n            };\n          });\n        });\n      }\n      var isInitialLoad = route === this.initialPage;\n      var promisedDeps =\n      // Shared styles will already be on the page:\n      route === '/_app' || // We use `style-loader` in development:\n      true ? Promise.resolve([]) :\n      // Tests that this does not block hydration:\n      // test/integration/css-fixtures/hydrate-without-deps/\n      (isInitialLoad ? Promise.resolve(looseToArray(document.querySelectorAll('link[data-n-p]')).map(function (e) {\n        return e.getAttribute('href');\n      })) : this.getDependencies(route).then(function (deps) {\n        return deps.filter(function (d) {\n          return d.endsWith('.css');\n        });\n      })).then(function (cssFiles) {\n        return (\n          // These files should've already been fetched by now, so this\n          // should resolve instantly.\n          Promise.all(cssFiles.map(function (d) {\n            return fetchStyleSheet(d);\n          }))[\"catch\"](function (err) {\n            if (isInitialLoad) {\n              Object.defineProperty(err, INITIAL_CSS_LOAD_ERROR, {});\n            }\n            throw err;\n          })\n        );\n      });\n      promisedDeps.then(function (deps) {\n        return register(deps);\n      }, function (error) {\n        _this6.pageCache[route] = {\n          error: error\n        };\n        _this6.pageRegisterEvents.emit(route, {\n          error: error\n        });\n      });\n    } /**\n      * @param {string} route\n      * @param {boolean} [isDependency]\n      */\n  }, {\n    key: \"prefetch\",\n    value: function prefetch(route, isDependency) {\n      var _this7 = this;\n      // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n      // License: Apache 2.0\n      var cn;\n      if (cn = navigator.connection) {\n        // Don't prefetch if using 2G or if Save-Data is enabled.\n        if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve();\n      } /** @type {string} */\n      var url;\n      if (isDependency) {\n        url = route;\n      } else {\n        if (true) {\n          route = normalizeRoute(route);\n          var ext = process.env.__NEXT_MODERN_BUILD && hasNoModule ? '.module.js' : '.js';\n          var scriptRoute = (0, _getAssetPathFromRoute[\"default\"])(route, ext);\n          url = \"\".concat(this.assetPrefix, \"/_next/static/\").concat(encodeURIComponent(this.buildId), \"/pages\").concat(encodeURI(scriptRoute));\n        }\n      }\n      return Promise.all(document.querySelector(\"link[rel=\\\"\".concat(relPrefetch, \"\\\"][href^=\\\"\").concat(url, \"\\\"]\")) ? [] : [url && appendLink(url, relPrefetch, url.endsWith('.css') ? relPreloadStyle : 'script'), false && !isDependency && this.getDependencies(route).then(function (urls) {\n        return Promise.all(urls.map(function (dependencyUrl) {\n          return _this7.prefetch(dependencyUrl, true);\n        }));\n      })]).then(\n      // do not return any data\n      function () {},\n      // swallow prefetch errors\n      function () {});\n    }\n  }]);\n  return PageLoader;\n}();\nexports[\"default\"] = PageLoader;","map":{"version":3,"sources":["../../client/page-loader.ts"],"names":["looseToArray","input","slice","call","hasRel","rel","link","document","createElement","relList","supports","pageLoadError","route","Error","INITIAL_CSS_LOAD_ERROR","Symbol","relPrefetch","relPreload","relPreloadStyle","hasNoModule","normalizeRoute","replace","appendLink","href","as","Promise","res","rej","crossOrigin","process","env","__NEXT_CROSS_ORIGIN","onload","onerror","head","appendChild","loadScript","url","script","__NEXT_MODERN_BUILD","type","src","body","PageLoader","initialPage","buildId","assetPrefix","pageCache","pageRegisterEvents","loadingRoutes","promisedBuildManifest","promisedSsgManifest","promisedDevPagesManifest","constructor","resolve","window","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","__SSG_MANIFEST","__SSG_MANIFEST_CB","getPageList","then","buildManifest","sortedPages","__DEV_PAGES_MANIFEST","pages","fetch","json","manifest","err","console","log","m","map","encodeURI","reject","getDataHref","asPath","ssg","locale","pathname","hrefPathname","query","search","asPathname","getHrefForSlug","path","dataRoute","isDynamic","interpolatedRoute","result","prefetchData","s","_dataHref","has","querySelector","loadPage","cachedPage","error","fire","pageToCache","off","on","getDependencies","deps","pending","forEach","d","endsWith","push","all","scriptRoute","registerPage","regFn","register","styleSheets","mod","pageData","page","emit","module","hot","status","check","removeStatusHandler","fetchStyleSheet","ok","text","isInitialLoad","promisedDeps","querySelectorAll","e","getAttribute","filter","cssFiles","Object","defineProperty","prefetch","isDependency","cn","navigator","connection","saveData","test","effectiveType","ext","encodeURIComponent","urls","dependencyUrl"],"mappings":"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","sourcesContent":["import { ComponentType } from 'react'\nimport type { ClientSsgManifest } from '../build'\nimport type { ClientBuildManifest } from '../build/webpack/plugins/build-manifest-plugin'\nimport type { MittEmitter } from '../next-server/lib/mitt'\nimport mitt from '../next-server/lib/mitt'\nimport {\n  addBasePath,\n  addLocale,\n  interpolateAs,\n  markLoadingError,\n} from '../next-server/lib/router/router'\nimport getAssetPathFromRoute from '../next-server/lib/router/utils/get-asset-path-from-route'\nimport { isDynamicRoute } from '../next-server/lib/router/utils/is-dynamic'\nimport { parseRelativeUrl } from '../next-server/lib/router/utils/parse-relative-url'\n\nexport const looseToArray = <T extends {}>(input: any): T[] =>\n  [].slice.call(input)\n\nfunction hasRel(rel: string, link?: HTMLLinkElement) {\n  try {\n    link = document.createElement('link')\n    return link.relList.supports(rel)\n  } catch {}\n}\n\nfunction pageLoadError(route: string) {\n  return markLoadingError(new Error(`Error loading ${route}`))\n}\n\nexport const INITIAL_CSS_LOAD_ERROR = Symbol('INITIAL_CSS_LOAD_ERROR')\n\nconst relPrefetch =\n  hasRel('preload') && !hasRel('prefetch')\n    ? // https://caniuse.com/#feat=link-rel-preload\n      // macOS and iOS (Safari does not support prefetch)\n      'preload'\n    : // https://caniuse.com/#feat=link-rel-prefetch\n      // IE 11, Edge 12+, nearly all evergreen\n      'prefetch'\n\nconst relPreload = hasRel('preload') ? 'preload' : relPrefetch\nconst relPreloadStyle = 'fetch'\n\nconst hasNoModule = 'noModule' in document.createElement('script')\n\nfunction normalizeRoute(route: string) {\n  if (route[0] !== '/') {\n    throw new Error(`Route name should start with a \"/\", got \"${route}\"`)\n  }\n\n  if (route === '/') return route\n  return route.replace(/\\/$/, '')\n}\n\nfunction appendLink(\n  href: string,\n  rel: string,\n  as?: string,\n  link?: HTMLLinkElement\n): Promise<any> {\n  return new Promise((res, rej) => {\n    link = document.createElement('link')\n\n    // The order of property assignment here is intentional:\n    if (as) link!.as = as\n    link!.rel = rel\n    link!.crossOrigin = process.env.__NEXT_CROSS_ORIGIN!\n    link!.onload = res\n    link!.onerror = rej\n\n    // `href` should always be last:\n    link!.href = href\n\n    document.head.appendChild(link)\n  })\n}\n\nfunction loadScript(url: string): Promise<any> {\n  return new Promise((res, rej) => {\n    const script = document.createElement('script')\n    if (process.env.__NEXT_MODERN_BUILD && hasNoModule) {\n      script.type = 'module'\n    }\n    script.crossOrigin = process.env.__NEXT_CROSS_ORIGIN!\n    script.src = url\n    script.onload = res\n    script.onerror = () => rej(pageLoadError(url))\n    document.body.appendChild(script)\n  })\n}\n\nexport type StyleSheetTuple = { href: string; text: string }\nexport type GoodPageCache = {\n  page: ComponentType\n  mod: any\n  styleSheets: StyleSheetTuple[]\n}\nexport type PageCacheEntry = { error: any } | GoodPageCache\n\nexport default class PageLoader {\n  private initialPage: string\n  private buildId: string\n  private assetPrefix: string\n  private pageCache: Record<string, PageCacheEntry>\n  private pageRegisterEvents: MittEmitter\n  private loadingRoutes: Record<string, boolean>\n  private promisedBuildManifest?: Promise<ClientBuildManifest>\n  private promisedSsgManifest?: Promise<ClientSsgManifest>\n  private promisedDevPagesManifest?: Promise<any>\n\n  constructor(buildId: string, assetPrefix: string, initialPage: string) {\n    this.initialPage = initialPage\n\n    this.buildId = buildId\n    this.assetPrefix = assetPrefix\n\n    this.pageCache = {}\n    this.pageRegisterEvents = mitt()\n    this.loadingRoutes = {\n      // By default these 2 pages are being loaded in the initial html\n      '/_app': true,\n    }\n\n    // TODO: get rid of this limitation for rendering the error page\n    if (initialPage !== '/_error') {\n      this.loadingRoutes[initialPage] = true\n    }\n\n    this.promisedBuildManifest = new Promise((resolve) => {\n      if ((window as any).__BUILD_MANIFEST) {\n        resolve((window as any).__BUILD_MANIFEST)\n      } else {\n        ;(window as any).__BUILD_MANIFEST_CB = () => {\n          resolve((window as any).__BUILD_MANIFEST)\n        }\n      }\n    })\n\n    /** @type {Promise<Set<string>>} */\n    this.promisedSsgManifest = new Promise((resolve) => {\n      if ((window as any).__SSG_MANIFEST) {\n        resolve((window as any).__SSG_MANIFEST)\n      } else {\n        ;(window as any).__SSG_MANIFEST_CB = () => {\n          resolve((window as any).__SSG_MANIFEST)\n        }\n      }\n    })\n  }\n\n  getPageList() {\n    if (process.env.NODE_ENV === 'production') {\n      return this.promisedBuildManifest!.then(\n        (buildManifest) => buildManifest.sortedPages\n      )\n    } else {\n      if ((window as any).__DEV_PAGES_MANIFEST) {\n        return (window as any).__DEV_PAGES_MANIFEST.pages\n      } else {\n        if (!this.promisedDevPagesManifest) {\n          this.promisedDevPagesManifest = fetch(\n            `${this.assetPrefix}/_next/static/development/_devPagesManifest.json`\n          )\n            .then((res) => res.json())\n            .then((manifest) => {\n              ;(window as any).__DEV_PAGES_MANIFEST = manifest\n              return manifest.pages\n            })\n            .catch((err) => {\n              console.log(`Failed to fetch devPagesManifest`, err)\n            })\n        }\n        return this.promisedDevPagesManifest\n      }\n    }\n  }\n\n  // Returns a promise for the dependencies for a particular route\n  private getDependencies(route: string): Promise<string[]> {\n    return this.promisedBuildManifest!.then((m) => {\n      return m[route]\n        ? m[route].map((url) => `${this.assetPrefix}/_next/${encodeURI(url)}`)\n        : Promise.reject(pageLoadError(route))\n    })\n  }\n\n  /**\n   * @param {string} href the route href (file-system path)\n   * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n   */\n  getDataHref(\n    href: string,\n    asPath: string,\n    ssg: boolean,\n    locale?: string | false\n  ) {\n    const { pathname: hrefPathname, query, search } = parseRelativeUrl(href)\n    const { pathname: asPathname } = parseRelativeUrl(asPath)\n    const route = normalizeRoute(hrefPathname)\n\n    const getHrefForSlug = (path: string) => {\n      const dataRoute = addLocale(getAssetPathFromRoute(path, '.json'), locale)\n      return addBasePath(\n        `/_next/data/${this.buildId}${dataRoute}${ssg ? '' : search}`\n      )\n    }\n\n    const isDynamic: boolean = isDynamicRoute(route)\n    const interpolatedRoute = isDynamic\n      ? interpolateAs(hrefPathname, asPathname, query).result\n      : ''\n\n    return isDynamic\n      ? interpolatedRoute && getHrefForSlug(interpolatedRoute)\n      : getHrefForSlug(route)\n  }\n\n  /**\n   * @param {string} href the route href (file-system path)\n   * @param {string} asPath the URL as shown in browser (virtual path); used for dynamic routes\n   */\n  prefetchData(href: string, asPath: string, locale?: string | false) {\n    const { pathname: hrefPathname } = parseRelativeUrl(href)\n    const route = normalizeRoute(hrefPathname)\n    return this.promisedSsgManifest!.then(\n      (s: ClientSsgManifest, _dataHref?: string) =>\n        // Check if the route requires a data file\n        s.has(route) &&\n        // Try to generate data href, noop when falsy\n        (_dataHref = this.getDataHref(href, asPath, true, locale)) &&\n        // noop when data has already been prefetched (dedupe)\n        !document.querySelector(\n          `link[rel=\"${relPrefetch}\"][href^=\"${_dataHref}\"]`\n        ) &&\n        // Inject the `<link rel=prefetch>` tag for above computed `href`.\n        appendLink(_dataHref, relPrefetch, 'fetch').catch(() => {\n          /* ignore prefetch error */\n        })\n    )\n  }\n\n  loadPage(route: string): Promise<GoodPageCache> {\n    route = normalizeRoute(route)\n\n    return new Promise<GoodPageCache>((resolve, reject) => {\n      // If there's a cached version of the page, let's use it.\n      const cachedPage = this.pageCache[route]\n      if (cachedPage) {\n        if ('error' in cachedPage) {\n          reject(cachedPage.error)\n        } else {\n          resolve(cachedPage)\n        }\n        return\n      }\n\n      const fire = (pageToCache: PageCacheEntry) => {\n        this.pageRegisterEvents.off(route, fire)\n        delete this.loadingRoutes[route]\n\n        if ('error' in pageToCache) {\n          reject(pageToCache.error)\n        } else {\n          resolve(pageToCache)\n        }\n      }\n\n      // Register a listener to get the page\n      this.pageRegisterEvents.on(route, fire)\n\n      if (!this.loadingRoutes[route]) {\n        this.loadingRoutes[route] = true\n        if (process.env.NODE_ENV === 'production') {\n          this.getDependencies(route)\n            .then((deps) => {\n              const pending: Promise<any>[] = []\n              deps.forEach((d) => {\n                if (\n                  d.endsWith('.js') &&\n                  !document.querySelector(`script[src^=\"${d}\"]`)\n                ) {\n                  pending.push(loadScript(d))\n                }\n\n                // Prefetch CSS as it'll be needed when the page JavaScript\n                // evaluates. This will only trigger if explicit prefetching is\n                // disabled for a <Link>... prefetching in this case is desirable\n                // because we *know* it's going to be used very soon (page was\n                // loaded).\n                if (\n                  d.endsWith('.css') &&\n                  !document.querySelector(\n                    `link[rel=\"${relPreload}\"][href^=\"${d}\"]`\n                  )\n                ) {\n                  // This is not pushed into `pending` because we don't need to\n                  // wait for these to resolve. To prevent an unhandled\n                  // rejection, we swallow the error which is handled later in\n                  // the rendering cycle (this is just a preload optimization).\n                  appendLink(d, relPreload, relPreloadStyle).catch(() => {\n                    /* ignore preload error */\n                  })\n                }\n              })\n              return Promise.all(pending)\n            })\n            .catch((err) => {\n              // Mark the page as failed to load if any of its required scripts\n              // fail to load:\n              this.pageCache[route] = { error: err }\n              fire({ error: err })\n            })\n        } else {\n          // Development only. In production the page file is part of the build manifest\n          route = normalizeRoute(route)\n          let scriptRoute = getAssetPathFromRoute(route, '.js')\n\n          const url = `${this.assetPrefix}/_next/static/chunks/pages${encodeURI(\n            scriptRoute\n          )}`\n          loadScript(url).catch((err) => {\n            // Mark the page as failed to load if its script fails to load:\n            this.pageCache[route] = { error: err }\n            fire({ error: err })\n          })\n        }\n      }\n    })\n  }\n\n  // This method if called by the route code.\n  registerPage(route: string, regFn: () => any) {\n    const register = async (styleSheets: StyleSheetTuple[]) => {\n      try {\n        const mod = await regFn()\n        const pageData: PageCacheEntry = {\n          page: mod.default || mod,\n          mod,\n          styleSheets,\n        }\n        this.pageCache[route] = pageData\n        this.pageRegisterEvents.emit(route, pageData)\n      } catch (error) {\n        this.pageCache[route] = { error }\n        this.pageRegisterEvents.emit(route, { error })\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Wait for webpack to become idle if it's not.\n      // More info: https://github.com/vercel/next.js/pull/1511\n      if ((module as any).hot && (module as any).hot.status() !== 'idle') {\n        console.log(\n          `Waiting for webpack to become \"idle\" to initialize the page: \"${route}\"`\n        )\n\n        const check = (status: string) => {\n          if (status === 'idle') {\n            ;(module as any).hot.removeStatusHandler(check)\n            register(\n              /* css is handled via style-loader in development */\n              []\n            )\n          }\n        }\n        ;(module as any).hot.status(check)\n        return\n      }\n    }\n\n    function fetchStyleSheet(href: string): Promise<StyleSheetTuple> {\n      return fetch(href).then((res) => {\n        if (!res.ok) throw pageLoadError(href)\n        return res.text().then((text) => ({ href, text }))\n      })\n    }\n\n    const isInitialLoad = route === this.initialPage\n    const promisedDeps: Promise<StyleSheetTuple[]> =\n      // Shared styles will already be on the page:\n      route === '/_app' ||\n      // We use `style-loader` in development:\n      process.env.NODE_ENV !== 'production'\n        ? Promise.resolve([])\n        : // Tests that this does not block hydration:\n          // test/integration/css-fixtures/hydrate-without-deps/\n          (isInitialLoad\n            ? Promise.resolve(\n                looseToArray<HTMLLinkElement>(\n                  document.querySelectorAll('link[data-n-p]')\n                ).map((e) => e.getAttribute('href')!)\n              )\n            : this.getDependencies(route).then((deps) =>\n                deps.filter((d) => d.endsWith('.css'))\n              )\n          ).then((cssFiles) =>\n            // These files should've already been fetched by now, so this\n            // should resolve instantly.\n            Promise.all(cssFiles.map((d) => fetchStyleSheet(d))).catch(\n              (err) => {\n                if (isInitialLoad) {\n                  Object.defineProperty(err, INITIAL_CSS_LOAD_ERROR, {})\n                }\n                throw err\n              }\n            )\n          )\n    promisedDeps.then(\n      (deps) => register(deps),\n      (error) => {\n        this.pageCache[route] = { error }\n        this.pageRegisterEvents.emit(route, { error })\n      }\n    )\n  }\n\n  /**\n   * @param {string} route\n   * @param {boolean} [isDependency]\n   */\n  prefetch(route: string, isDependency?: boolean): Promise<void> {\n    // https://github.com/GoogleChromeLabs/quicklink/blob/453a661fa1fa940e2d2e044452398e38c67a98fb/src/index.mjs#L115-L118\n    // License: Apache 2.0\n    let cn\n    if ((cn = (navigator as any).connection)) {\n      // Don't prefetch if using 2G or if Save-Data is enabled.\n      if (cn.saveData || /2g/.test(cn.effectiveType)) return Promise.resolve()\n    }\n\n    /** @type {string} */\n    let url\n    if (isDependency) {\n      url = route\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        route = normalizeRoute(route)\n\n        const ext =\n          process.env.__NEXT_MODERN_BUILD && hasNoModule ? '.module.js' : '.js'\n        const scriptRoute = getAssetPathFromRoute(route, ext)\n\n        url = `${this.assetPrefix}/_next/static/${encodeURIComponent(\n          this.buildId\n        )}/pages${encodeURI(scriptRoute)}`\n      }\n    }\n\n    return Promise.all(\n      document.querySelector(`link[rel=\"${relPrefetch}\"][href^=\"${url}\"]`)\n        ? []\n        : [\n            url &&\n              appendLink(\n                url,\n                relPrefetch,\n                url.endsWith('.css') ? relPreloadStyle : 'script'\n              ),\n            process.env.NODE_ENV === 'production' &&\n              !isDependency &&\n              this.getDependencies(route).then((urls) =>\n                Promise.all(\n                  urls.map((dependencyUrl) =>\n                    this.prefetch(dependencyUrl, true)\n                  )\n                )\n              ),\n          ]\n    ).then(\n      // do not return any data\n      () => {},\n      // swallow prefetch errors\n      () => {}\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"script"}